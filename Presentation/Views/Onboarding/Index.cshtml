@model Presentation.Models.OnboardingViewModel
@{
    ViewData["Title"] = "Profile Completion";
    var progress = Model.Progress.ProgressPercent;
}

<div class="row justify-content-center">
    <div class="col-12 col-xl-10">
        <div class="card border-0 shadow-sm rounded-4 mb-4 onboarding-progress-shell">
            <div class="card-body p-4">
                <div class="d-flex flex-wrap align-items-center justify-content-between gap-3">
                    <div>
                        <h3 class="mb-1">Complete Your Profile</h3>
                        <p class="text-muted mb-0">Finish all required sections to unlock full portal access.</p>
                    </div>
                    <div class="text-end">
                        <div class="fw-semibold">Progress</div>
                        <div class="text-muted" id="onboardingProgressText">@progress%</div>
                    </div>
                </div>

                <div class="onboarding-progress-bar mt-4">
                    <div id="onboardingProgressBar" class="onboarding-progress-fill" style="width: @progress%"></div>
                </div>

                <div class="onboarding-stepper mt-4">
                    <div class="onboarding-stepper-line"></div>
                    <div class="onboarding-step" data-step="personal_details">
                        <div class="onboarding-step-circle">1</div>
                        <div class="onboarding-step-label">Personal Details</div>
                    </div>
                    <div class="onboarding-step" data-step="qualifications">
                        <div class="onboarding-step-circle">2</div>
                        <div class="onboarding-step-label">Qualifications</div>
                    </div>
                    <div class="onboarding-step" data-step="next_of_kin">
                        <div class="onboarding-step-circle">3</div>
                        <div class="onboarding-step-label">Next of Kin</div>
                    </div>
                    <div class="onboarding-step" data-step="hr_info">
                        <div class="onboarding-step-circle">4</div>
                        <div class="onboarding-step-label">HR Info</div>
                    </div>
                    <div class="onboarding-step" data-step="documents">
                        <div class="onboarding-step-circle">5</div>
                        <div class="onboarding-step-label">Documents</div>
                    </div>
                </div>
            </div>
        </div>

        @if (Model.IsComplete)
        {
            <div class="alert alert-success d-flex align-items-center gap-2">
                <i class="bi bi-check-circle-fill"></i>
                <div>Your onboarding is complete. You now have full access to the portal.</div>
                <a asp-controller="Home" asp-action="Index" class="btn btn-sm btn-success ms-auto">Go to Dashboard</a>
            </div>
        }

        <div class="card border-0 shadow-sm rounded-4 mb-4" data-module="personal_details">
            <div class="card-header bg-light py-3">
                <div class="d-flex align-items-center justify-content-between">
                    <button class="btn btn-link text-decoration-none p-0 fw-semibold text-dark" type="button" data-bs-toggle="collapse" data-bs-target="#module-personal_details" aria-expanded="true" aria-controls="module-personal_details">
                        <i class="bi bi-person-badge me-2 text-primary"></i>Personal Details
                    </button>
                    <span class="badge rounded-pill" id="module-status-personal_details">Pending</span>
                </div>
            </div>
            <div id="module-personal_details" class="collapse show">
                <div class="card-body p-4">
                <form id="personalDetailsForm" asp-action="PersonalDetails" method="post">
                    @Html.AntiForgeryToken()
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label asp-for="PersonalDetails.FirstName" class="form-label"></label>
                            <input asp-for="PersonalDetails.FirstName" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="PersonalDetails.LastName" class="form-label"></label>
                            <input asp-for="PersonalDetails.LastName" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="PersonalDetails.Email" class="form-label"></label>
                            <input asp-for="PersonalDetails.Email" class="form-control" readonly />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="PersonalDetails.PhoneNumber" class="form-label"></label>
                            <input asp-for="PersonalDetails.PhoneNumber" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="PersonalDetails.Gender" class="form-label"></label>
                            <select asp-for="PersonalDetails.Gender" class="form-select">
                                <option value="">-- Select --</option>
                                <option value="Female">Female</option>
                                <option value="Male">Male</option>
                                <option value="Other">Other</option>
                                <option value="Prefer not to say">Prefer not to say</option>
                            </select>
                        </div>
                        <div class="col-12">
                            <label asp-for="PersonalDetails.Street" class="form-label"></label>
                            <input asp-for="PersonalDetails.Street" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="PersonalDetails.City" class="form-label"></label>
                            <input asp-for="PersonalDetails.City" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="PersonalDetails.State" class="form-label"></label>
                            <input asp-for="PersonalDetails.State" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="PersonalDetails.Country" class="form-label"></label>
                            <input asp-for="PersonalDetails.Country" class="form-control" />
                        </div>
                    </div>
                    <div class="text-danger small mt-2" data-error-for="personal_details"></div>
                    <div class="mt-3">
                        <button type="submit" class="btn btn-primary">Save Personal Details</button>
                    </div>
                </form>
                </div>
            </div>
        </div>

        <div class="card border-0 shadow-sm rounded-4 mb-4" data-module="qualifications">
            <div class="card-header bg-light py-3">
                <div class="d-flex align-items-center justify-content-between">
                    <button class="btn btn-link text-decoration-none p-0 fw-semibold text-dark" type="button" data-bs-toggle="collapse" data-bs-target="#module-qualifications" aria-expanded="false" aria-controls="module-qualifications">
                        <i class="bi bi-mortarboard me-2 text-primary"></i>Qualifications
                    </button>
                    <span class="badge rounded-pill" id="module-status-qualifications">Pending</span>
                </div>
            </div>
            <div id="module-qualifications" class="collapse">
                <div class="card-body p-4">
                <form id="qualificationForm" asp-action="Qualification" method="post">
                    @Html.AntiForgeryToken()
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label asp-for="Qualification.Title" class="form-label"></label>
                            <input asp-for="Qualification.Title" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="Qualification.Institution" class="form-label"></label>
                            <input asp-for="Qualification.Institution" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="Qualification.Year" class="form-label"></label>
                            <input asp-for="Qualification.Year" class="form-control" />
                        </div>
                        <div class="col-md-8">
                            <label asp-for="Qualification.Grade" class="form-label"></label>
                            <input asp-for="Qualification.Grade" class="form-control" />
                        </div>
                    </div>
                    <div class="text-danger small mt-2" data-error-for="qualifications"></div>
                    <div class="mt-3 d-flex flex-wrap gap-2">
                        <button type="submit" class="btn btn-primary">Add Qualification</button>
                        <span class="text-muted small align-self-center">Add at least one qualification to complete this section.</span>
                    </div>
                </form>

                <div class="mt-4">
                    <h6 class="text-muted">Existing Qualifications</h6>
                    <div class="table-responsive">
                        <table class="table table-sm align-middle">
                            <thead>
                                <tr>
                                    <th>Title</th>
                                    <th>Institution</th>
                                    <th>Year</th>
                                    <th>Grade</th>
                                </tr>
                            </thead>
                            <tbody id="qualificationTableBody">
                                @if (Model.ExistingQualifications.Count == 0)
                                {
                                    <tr id="qualificationEmptyRow">
                                        <td colspan="4" class="text-muted small">No qualifications added yet.</td>
                                    </tr>
                                }
                                else
                                {
                                    @foreach (var item in Model.ExistingQualifications)
                                    {
                                        <tr>
                                            <td>@item.Title</td>
                                            <td>@item.Institution</td>
                                            <td>@item.Year</td>
                                            <td>@item.Grade</td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
                </div>
            </div>
        </div>

        <div class="card border-0 shadow-sm rounded-4 mb-4" data-module="next_of_kin">
            <div class="card-header bg-light py-3">
                <div class="d-flex align-items-center justify-content-between">
                    <button class="btn btn-link text-decoration-none p-0 fw-semibold text-dark" type="button" data-bs-toggle="collapse" data-bs-target="#module-next_of_kin" aria-expanded="false" aria-controls="module-next_of_kin">
                        <i class="bi bi-people me-2 text-primary"></i>Next of Kin
                    </button>
                    <span class="badge rounded-pill" id="module-status-next_of_kin">Pending</span>
                </div>
            </div>
            <div id="module-next_of_kin" class="collapse">
                <div class="card-body p-4">
                <form id="nextOfKinForm" asp-action="NextOfKin" method="post">
                    @Html.AntiForgeryToken()
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label asp-for="NextOfKin.FullName" class="form-label"></label>
                            <input asp-for="NextOfKin.FullName" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="NextOfKin.Relationship" class="form-label"></label>
                            <select asp-for="NextOfKin.Relationship" class="form-select">
                                <option value="">-- Select --</option>
                                <option>Parent</option>
                                <option>Sibling</option>
                                <option>Spouse</option>
                                <option>Child</option>
                                <option>Guardian</option>
                                <option>Other</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label asp-for="NextOfKin.PhoneNumber" class="form-label"></label>
                            <input asp-for="NextOfKin.PhoneNumber" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label asp-for="NextOfKin.Address" class="form-label"></label>
                            <input asp-for="NextOfKin.Address" class="form-control" />
                        </div>
                    </div>
                    <div class="text-danger small mt-2" data-error-for="next_of_kin"></div>
                    <div class="mt-3">
                        <button type="submit" class="btn btn-primary">Save Next of Kin</button>
                    </div>
                </form>
                </div>
            </div>
        </div>

        <div class="card border-0 shadow-sm rounded-4 mb-4" data-module="hr_info">
            <div class="card-header bg-light py-3">
                <div class="d-flex align-items-center justify-content-between">
                    <button class="btn btn-link text-decoration-none p-0 fw-semibold text-dark" type="button" data-bs-toggle="collapse" data-bs-target="#module-hr_info" aria-expanded="false" aria-controls="module-hr_info">
                        <i class="bi bi-clipboard-check me-2 text-primary"></i>HR Information
                    </button>
                    <span class="badge rounded-pill" id="module-status-hr_info">Pending</span>
                </div>
            </div>
            <div id="module-hr_info" class="collapse">
                <div class="card-body p-4">
                <form id="hrInfoForm" asp-action="HrInfo" method="post">
                    @Html.AntiForgeryToken()
                    <div class="row g-3">
                        <div class="col-md-4">
                            <label asp-for="HrInfo.DateOfBirth" class="form-label"></label>
                            <input asp-for="HrInfo.DateOfBirth" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="HrInfo.MaritalStatus" class="form-label"></label>
                            <select asp-for="HrInfo.MaritalStatus" class="form-select">
                                <option value="">-- Select --</option>
                                <option value="Single">Single</option>
                                <option value="Married">Married</option>
                                <option value="Divorced">Divorced</option>
                                <option value="Widowed">Widowed</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="HrInfo.NationalId" class="form-label"></label>
                            <input asp-for="HrInfo.NationalId" class="form-control" />
                        </div>
                        <div class="col-md-4">
                            <label asp-for="HrInfo.BloodGroup" class="form-label"></label>
                            <select asp-for="HrInfo.BloodGroup" class="form-select">
                                <option value="">-- Select --</option>
                                <option>O+</option>
                                <option>O-</option>
                                <option>A+</option>
                                <option>A-</option>
                                <option>B+</option>
                                <option>B-</option>
                                <option>AB+</option>
                                <option>AB-</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label asp-for="HrInfo.Genotype" class="form-label"></label>
                            <select asp-for="HrInfo.Genotype" class="form-select">
                                <option value="">-- Select --</option>
                                <option>AA</option>
                                <option>AS</option>
                                <option>AC</option>
                                <option>SS</option>
                                <option>SC</option>
                            </select>
                        </div>
                    </div>
                    <div class="text-danger small mt-2" data-error-for="hr_info"></div>
                    <div class="mt-3">
                        <button type="submit" class="btn btn-primary">Save HR Information</button>
                    </div>
                </form>
                </div>
            </div>
        </div>

        <div class="card border-0 shadow-sm rounded-4 mb-4" data-module="documents">
            <div class="card-header bg-light py-3">
                <div class="d-flex align-items-center justify-content-between">
                    <button class="btn btn-link text-decoration-none p-0 fw-semibold text-dark" type="button" data-bs-toggle="collapse" data-bs-target="#module-documents" aria-expanded="false" aria-controls="module-documents">
                        <i class="bi bi-folder2-open me-2 text-primary"></i>Documents
                    </button>
                    <span class="badge rounded-pill" id="module-status-documents">Pending</span>
                </div>
            </div>
            <div id="module-documents" class="collapse">
                <div class="card-body p-4">
                    <form id="documentsForm" asp-action="UploadDocument" method="post" enctype="multipart/form-data">
                        @Html.AntiForgeryToken()
                        <div class="row g-4">
                            <div class="col-md-5">
                                <label class="form-label fw-bold small text-muted">Type</label>
                                <select name="DocumentType" class="form-input-premium w-100" required>
                                    <option value="">Select Category</option>
                                    <option value="ID Card">Government ID</option>
                                    <option value="Passport">Passport</option>
                                    <option value="Contract">Contract</option>
                                    <option value="Certificate">Certificate</option>
                                    <option value="Resume">Resume</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label fw-bold small text-muted">Expiry Date (Optional)</label>
                                <input type="date" name="ExpiryDate" class="form-input-premium w-100" />
                            </div>
                            <div class="col-md-3 d-flex align-items-end">
                                <button type="submit" class="btn btn-premium btn-premium-primary w-100">
                                    <i class="bi bi-cloud-arrow-up"></i> Upload
                                </button>
                            </div>
                            <div class="col-12">
                                <label class="form-label fw-bold small text-muted">Select File</label>
                                <input type="file" name="File" class="form-control form-input-premium" required accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" />
                            </div>
                        </div>
                        <div class="text-danger small mt-2" data-error-for="documents"></div>
                    </form>

                    <div class="mt-4">
                        <h6 class="text-muted">Uploaded Documents</h6>
                        <div class="table-responsive">
                            <table class="table table-sm align-middle">
                                <thead>
                                    <tr>
                                        <th>Type</th>
                                        <th>File</th>
                                        <th>Uploaded</th>
                                        <th>Expiry</th>
                                    </tr>
                                </thead>
                                <tbody id="documentsTableBody">
                                    @if (Model.Documents.Count == 0)
                                    {
                                        <tr id="documentsEmptyRow">
                                            <td colspan="4" class="text-muted small">No documents uploaded yet.</td>
                                        </tr>
                                    }
                                    else
                                    {
                                        @foreach (var doc in Model.Documents)
                                        {
                                            <tr>
                                                <td>@doc.DocumentType</td>
                                                <td>@doc.FileName</td>
                                                <td>@doc.UploadedDate.ToString("MMM dd, yyyy")</td>
                                                <td>@(doc.ExpiryDate?.ToString("MMM dd, yyyy") ?? "—")</td>
                                            </tr>
                                        }
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <style>
        .onboarding-progress-shell {
            background: linear-gradient(135deg, #e9f7ff 0%, #f5fbff 45%, #ffffff 100%);
        }

        .onboarding-progress-bar {
            position: relative;
            height: 20px;
            background: #ffffff;
            border-radius: 999px;
            overflow: hidden;
            box-shadow: inset 0 0 0 1px rgba(15, 118, 255, 0.1);
        }

        .onboarding-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0d6efd 0%, #1299ff 100%);
            border-radius: 999px;
            transition: width 0.35s ease;
        }

        .onboarding-stepper {
            position: relative;
            display: grid;
            grid-template-columns: repeat(5, minmax(0, 1fr));
            gap: 12px;
            align-items: center;
            padding: 24px 12px 8px;
        }

        .onboarding-stepper-line {
            position: absolute;
            top: 44px;
            left: 8%;
            right: 8%;
            height: 4px;
            background: rgba(13, 110, 253, 0.2);
            border-radius: 999px;
            z-index: 0;
        }

        .onboarding-step {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 8px;
            z-index: 1;
        }

        .onboarding-step-circle {
            width: 54px;
            height: 54px;
            border-radius: 999px;
            display: grid;
            place-items: center;
            background: #ffffff;
            border: 3px solid rgba(13, 110, 253, 0.2);
            color: #0d6efd;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 6px 16px rgba(13, 110, 253, 0.18);
            transition: all 0.3s ease;
            position: relative;
        }

        .onboarding-step-label {
            font-size: 0.85rem;
            font-weight: 600;
            color: #40627a;
            max-width: 120px;
        }

        .onboarding-step.completed .onboarding-step-circle {
            background: #0d6efd;
            border-color: #0d6efd;
            color: transparent;
        }

        .onboarding-step.completed .onboarding-step-circle::after {
            content: "✓";
            font-size: 1.4rem;
            color: #ffffff;
            position: absolute;
            inset: 0;
            display: grid;
            place-items: center;
        }

        .onboarding-step.active .onboarding-step-circle {
            background: #0d6efd;
            border-color: #0d6efd;
            color: #ffffff;
            box-shadow: 0 0 0 6px rgba(13, 110, 253, 0.18);
        }

        .onboarding-step.active .onboarding-step-label {
            color: #0d6efd;
        }

        @@media (max-width: 768px) {
            .onboarding-stepper {
                grid-template-columns: repeat(2, minmax(0, 1fr));
                row-gap: 20px;
            }

            .onboarding-stepper-line {
                display: none;
            }
        }
    </style>
    <script>
        const moduleStatusMap = new Map();

        function setModuleBadge(moduleKey, isCompleted) {
            const badge = document.getElementById(`module-status-${moduleKey}`);
            if (!badge) return;

            badge.textContent = isCompleted ? 'Completed' : 'Pending';
            badge.classList.toggle('bg-success', isCompleted);
            badge.classList.toggle('bg-secondary', !isCompleted);
        }

        function getModuleCards() {
            return Array.from(document.querySelectorAll('[data-module]'));
        }

        function openModule(moduleKey) {
            const target = document.getElementById(`module-${moduleKey}`);
            if (!target) return;
            const collapse = bootstrap.Collapse.getOrCreateInstance(target, { toggle: false });
            collapse.show();
        }

        function closeModule(moduleKey) {
            const target = document.getElementById(`module-${moduleKey}`);
            if (!target) return;
            const collapse = bootstrap.Collapse.getOrCreateInstance(target, { toggle: false });
            collapse.hide();
        }

        function updateModuleVisibility(progress) {
            if (!Array.isArray(progress.modules)) return;

            const firstIncomplete = progress.modules.find(m => !m.isCompleted);
            progress.modules.forEach(module => {
                if (module.isCompleted) {
                    closeModule(module.key);
                } else if (firstIncomplete && module.key === firstIncomplete.key) {
                    openModule(module.key);
                } else {
                    closeModule(module.key);
                }
            });
        }

        function updateStepStates(progress) {
            if (!Array.isArray(progress.modules)) return;

            const steps = document.querySelectorAll('.onboarding-step');
            const firstIncomplete = progress.modules.find(m => !m.isCompleted);

            steps.forEach(step => {
                const key = step.getAttribute('data-step');
                const module = progress.modules.find(m => m.key === key);
                if (!module) return;

                step.classList.toggle('completed', module.isCompleted);
                step.classList.toggle('active', firstIncomplete && module.key === firstIncomplete.key);
            });
        }

        function updateProgress(progress) {
            const bar = document.getElementById('onboardingProgressBar');
            const text = document.getElementById('onboardingProgressText');
            const percent = progress.progressPercent ?? 0;
            if (bar) {
                bar.style.width = `${percent}%`;
            }
            if (text) {
                text.textContent = `${percent}%`;
            }

            if (Array.isArray(progress.modules)) {
                progress.modules.forEach(module => {
                    moduleStatusMap.set(module.key, module.isCompleted);
                    setModuleBadge(module.key, module.isCompleted);
                });
            }

            updateModuleVisibility(progress);
            updateStepStates(progress);
        }

        function clearError(moduleKey) {
            const el = document.querySelector(`[data-error-for="${moduleKey}"]`);
            if (el) {
                el.textContent = '';
            }
        }

        function showError(moduleKey, message) {
            const el = document.querySelector(`[data-error-for="${moduleKey}"]`);
            if (el) {
                el.textContent = message;
            }
        }

        async function submitOnboardingForm(formId, moduleKey, endpoint) {
            const form = document.getElementById(formId);
            if (!form) return;

            form.addEventListener('submit', async (event) => {
                event.preventDefault();
                clearError(moduleKey);

                const token = form.querySelector('input[name="__RequestVerificationToken"]')?.value;
                const formData = new FormData(form);

                const response = await fetch(endpoint, {
                    method: 'POST',
                    body: formData,
                    headers: token ? { 'RequestVerificationToken': token } : {},
                    credentials: 'same-origin'
                });

                if (!response.ok) {
                    const rawText = await response.text();
                    let message = 'Please check the form and try again.';
                    try {
                        const payload = rawText ? JSON.parse(rawText) : null;
                        const firstError = payload?.errors ? Object.values(payload.errors).flat()?.[0] : null;
                        message = firstError || payload?.message || message;
                    } catch {
                        if (rawText && rawText.includes('Antiforgery')) {
                            message = 'Your session expired. Please refresh and try again.';
                        }
                    }
                    showError(moduleKey, message);
                    console.error('Onboarding save failed', response.status, rawText);
                    return;
                }

                const data = await response.json();
                updateProgress(data);

            if (moduleKey === 'qualifications') {
                const title = form.querySelector('[name="Qualification.Title"]').value;
                const institution = form.querySelector('[name="Qualification.Institution"]').value;
                const year = form.querySelector('[name="Qualification.Year"]').value;
                const grade = form.querySelector('[name="Qualification.Grade"]').value;
                const tableBody = document.getElementById('qualificationTableBody');
                    if (tableBody) {
                        const emptyRow = document.getElementById('qualificationEmptyRow');
                        if (emptyRow) {
                            emptyRow.remove();
                        }
                        const row = document.createElement('tr');
                        row.innerHTML = `<td>${title}</td><td>${institution}</td><td>${year}</td><td>${grade || ''}</td>`;
                        tableBody.appendChild(row);
                    }
                form.reset();
                form.querySelector('[name="Qualification.Year"]').value = new Date().getFullYear();
            }

            if (moduleKey === 'documents') {
                const docType = form.querySelector('[name="DocumentType"]').value;
                const fileInput = form.querySelector('[name="File"]');
                const fileName = fileInput?.files?.[0]?.name || 'Uploaded file';
                const expiry = form.querySelector('[name="ExpiryDate"]').value;
                const tableBody = document.getElementById('documentsTableBody');
                if (tableBody) {
                    const emptyRow = document.getElementById('documentsEmptyRow');
                    if (emptyRow) {
                        emptyRow.remove();
                    }
                    const row = document.createElement('tr');
                    row.innerHTML = `<td>${docType}</td><td>${fileName}</td><td>Just now</td><td>${expiry || '—'}</td>`;
                    tableBody.appendChild(row);
                }
                form.reset();
            }
        });
        }

        updateProgress(@Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.Progress, new System.Text.Json.JsonSerializerOptions(System.Text.Json.JsonSerializerDefaults.Web))));

        submitOnboardingForm('personalDetailsForm', 'personal_details', '@Url.Action("PersonalDetails", "Onboarding")');
        submitOnboardingForm('qualificationForm', 'qualifications', '@Url.Action("Qualification", "Onboarding")');
        submitOnboardingForm('nextOfKinForm', 'next_of_kin', '@Url.Action("NextOfKin", "Onboarding")');
        submitOnboardingForm('hrInfoForm', 'hr_info', '@Url.Action("HrInfo", "Onboarding")');
        submitOnboardingForm('documentsForm', 'documents', '@Url.Action("UploadDocument", "Onboarding")');
    </script>
}
